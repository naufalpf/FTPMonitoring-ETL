<?xml version="1.0"?>
<DTS:Executable xmlns:DTS="www.microsoft.com/SqlServer/Dts"
  DTS:refId="Package"
  DTS:CreationDate="7/16/2018 10:44:08 AM"
  DTS:CreationName="Microsoft.Package"
  DTS:CreatorComputerName="ETL_SVR"
  DTS:CreatorName="ETL_SVR\Administrator"
  DTS:DTSID="{13833711-FE08-4C4C-BC88-1AC9DE3CEFD8}"
  DTS:ExecutableType="Microsoft.Package"
  DTS:LastModifiedProductVersion="14.0.3002.107"
  DTS:LocaleID="1033"
  DTS:ObjectName="MonitoringPackageFromBEI"
  DTS:PackageType="5"
  DTS:VersionBuild="22"
  DTS:VersionGUID="{052DE6F9-1048-4530-8E44-5099C1DC8CDD}">
  <DTS:Property
    DTS:Name="PackageFormatVersion">8</DTS:Property>
  <DTS:ConnectionManagers>
    <DTS:ConnectionManager
      DTS:refId="Package.ConnectionManagers[172.16.117.211.FTPMonitoring]"
      DTS:CreationName="OLEDB"
      DTS:DTSID="{D7BB1468-A27E-4377-B6CC-71887630C5F9}"
      DTS:ObjectName="172.16.117.211.FTPMonitoring">
      <DTS:ObjectData>
        <DTS:ConnectionManager
          DTS:ConnectionString="Data Source=172.16.117.211;Initial Catalog=FTPMonitoring;Provider=SQLNCLI11;Integrated Security=SSPI;Auto Translate=False;Application Name=SSIS-MonitoringPackageFromBEI-{D7BB1468-A27E-4377-B6CC-71887630C5F9}172.16.117.211.FTPMonitoring;" />
      </DTS:ObjectData>
    </DTS:ConnectionManager>
  </DTS:ConnectionManagers>
  <DTS:Variables>
    <DTS:Variable
      DTS:CreationName=""
      DTS:DTSID="{15B44AA6-4411-4E37-A7F7-0E0A4E4BC722}"
      DTS:IncludeInDebugDump="6789"
      DTS:Namespace="User"
      DTS:ObjectName="countRow">
      <DTS:VariableValue
        DTS:DataType="3">0</DTS:VariableValue>
    </DTS:Variable>
    <DTS:Variable
      DTS:CreationName=""
      DTS:DTSID="{E20C8AB6-D388-49F5-80F4-0D4516FDB698}"
      DTS:IncludeInDebugDump="6789"
      DTS:Namespace="User"
      DTS:ObjectName="fileId">
      <DTS:VariableValue
        DTS:DataType="3">0</DTS:VariableValue>
    </DTS:Variable>
    <DTS:Variable
      DTS:CreationName=""
      DTS:DTSID="{0D346846-0F39-4C02-AD5E-B6E59AD7D0F9}"
      DTS:IncludeInDebugDump="6789"
      DTS:Namespace="User"
      DTS:ObjectName="fileIdCollection">
      <DTS:VariableValue
        DTS:DataSubType="ManagedSerializable"
        DTS:DataType="13">
        <SOAP-ENV:Envelope xmlns:clr="http://schemas.microsoft.com/soap/encoding/clr/1.0" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
          <SOAP-ENV:Body>
            <xsd:anyType
              id="ref-1"></xsd:anyType>
          </SOAP-ENV:Body>
        </SOAP-ENV:Envelope>
      </DTS:VariableValue>
    </DTS:Variable>
    <DTS:Variable
      DTS:CreationName=""
      DTS:DTSID="{9E816FCB-7D68-4108-B47C-B62E1D26164B}"
      DTS:IncludeInDebugDump="2345"
      DTS:Namespace="User"
      DTS:ObjectName="fileName">
      <DTS:VariableValue
        DTS:DataType="8"
        xml:space="preserve"></DTS:VariableValue>
    </DTS:Variable>
    <DTS:Variable
      DTS:CreationName=""
      DTS:DTSID="{E2DD6209-34E5-46DD-A21C-CB248632E953}"
      DTS:IncludeInDebugDump="6789"
      DTS:Namespace="User"
      DTS:ObjectName="fileNameCollection">
      <DTS:VariableValue
        DTS:DataSubType="ManagedSerializable"
        DTS:DataType="13">
        <SOAP-ENV:Envelope xmlns:clr="http://schemas.microsoft.com/soap/encoding/clr/1.0" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
          <SOAP-ENV:Body>
            <xsd:anyType
              id="ref-1"></xsd:anyType>
          </SOAP-ENV:Body>
        </SOAP-ENV:Envelope>
      </DTS:VariableValue>
    </DTS:Variable>
    <DTS:Variable
      DTS:CreationName=""
      DTS:DTSID="{A94149B0-56C3-4186-BDC3-279992FEA710}"
      DTS:IncludeInDebugDump="6789"
      DTS:Namespace="User"
      DTS:ObjectName="monitoringConfigurationId">
      <DTS:VariableValue
        DTS:DataType="3">0</DTS:VariableValue>
    </DTS:Variable>
    <DTS:Variable
      DTS:CreationName=""
      DTS:DTSID="{FCD1CC0D-06F5-444E-AD77-11629C2A63C0}"
      DTS:IncludeInDebugDump="6789"
      DTS:Namespace="User"
      DTS:ObjectName="monitoringConfigurationIdBefore">
      <DTS:VariableValue
        DTS:DataType="3">0</DTS:VariableValue>
    </DTS:Variable>
    <DTS:Variable
      DTS:CreationName=""
      DTS:DTSID="{70A97025-0D95-475C-AB50-453212C87C18}"
      DTS:IncludeInDebugDump="6789"
      DTS:Namespace="User"
      DTS:ObjectName="monitoringConfigurationIdCollection">
      <DTS:VariableValue
        DTS:DataSubType="ManagedSerializable"
        DTS:DataType="13">
        <SOAP-ENV:Envelope xmlns:clr="http://schemas.microsoft.com/soap/encoding/clr/1.0" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
          <SOAP-ENV:Body>
            <xsd:anyType
              id="ref-1"></xsd:anyType>
          </SOAP-ENV:Body>
        </SOAP-ENV:Envelope>
      </DTS:VariableValue>
    </DTS:Variable>
    <DTS:Variable
      DTS:CreationName=""
      DTS:DTSID="{54C51D33-DF2F-4F0F-9D49-A7C6F3FE687E}"
      DTS:IncludeInDebugDump="6789"
      DTS:Namespace="User"
      DTS:ObjectName="monitoringLogId">
      <DTS:VariableValue
        DTS:DataType="3">0</DTS:VariableValue>
    </DTS:Variable>
    <DTS:Variable
      DTS:CreationName=""
      DTS:DTSID="{40962096-B5A9-4C97-B763-6A9BDCA8BCAE}"
      DTS:IncludeInDebugDump="6789"
      DTS:Namespace="User"
      DTS:ObjectName="stateId">
      <DTS:VariableValue
        DTS:DataType="3">0</DTS:VariableValue>
    </DTS:Variable>
  </DTS:Variables>
  <DTS:Executables>
    <DTS:Executable
      DTS:refId="Package\Foreach Loop File Template Id Collection"
      DTS:CreationName="STOCK:FOREACHLOOP"
      DTS:Description="Foreach Loop Container"
      DTS:DTSID="{863EEED8-1853-45CA-A532-12AB3B07920C}"
      DTS:ExecutableType="STOCK:FOREACHLOOP"
      DTS:LocaleID="-1"
      DTS:ObjectName="Foreach Loop File Template Id Collection">
      <DTS:ForEachEnumerator
        DTS:CreationName="Microsoft.ForEachADOEnumerator"
        DTS:DTSID="{77FB4057-F1EF-44AB-A43B-4A31D17B152A}"
        DTS:ObjectName="{77FB4057-F1EF-44AB-A43B-4A31D17B152A}">
        <DTS:ObjectData>
          <FEEADO
            EnumType="EnumerateRowsInFirstTable"
            VarName="User::fileIdCollection" />
        </DTS:ObjectData>
      </DTS:ForEachEnumerator>
      <DTS:Variables />
      <DTS:Executables>
        <DTS:Executable
          DTS:refId="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection"
          DTS:CreationName="STOCK:FOREACHLOOP"
          DTS:Description="Foreach Loop Container"
          DTS:DTSID="{0991884F-8CAB-4267-802B-00496AD4F4EE}"
          DTS:ExecutableType="STOCK:FOREACHLOOP"
          DTS:LocaleID="-1"
          DTS:ObjectName="Foreach Loop Monitoring Configuration Id Collection">
          <DTS:ForEachEnumerator
            DTS:CreationName="Microsoft.ForEachADOEnumerator"
            DTS:DTSID="{E1CFCBD6-7140-4910-8D0C-57CB5CED42F7}"
            DTS:ObjectName="{E1CFCBD6-7140-4910-8D0C-57CB5CED42F7}">
            <DTS:ObjectData>
              <FEEADO
                EnumType="EnumerateRowsInFirstTable"
                VarName="User::monitoringConfigurationIdCollection" />
            </DTS:ObjectData>
          </DTS:ForEachEnumerator>
          <DTS:Variables />
          <DTS:Executables>
            <DTS:Executable
              DTS:refId="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Equal 1"
              DTS:CreationName="STOCK:SEQUENCE"
              DTS:Description="Sequence Container"
              DTS:DTSID="{3889DED6-14FA-4A0D-9452-D52F0F4F9EA0}"
              DTS:ExecutableType="STOCK:SEQUENCE"
              DTS:LocaleID="-1"
              DTS:ObjectName="Process If stateId Equal 1">
              <DTS:Variables />
              <DTS:Executables>
                <DTS:Executable
                  DTS:refId="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Equal 1\Check File That Is Ready To Be Transferred"
                  DTS:CreationName="Microsoft.ExecuteSQLTask"
                  DTS:Description="Execute SQL Task"
                  DTS:DTSID="{07e9fe07-2a57-4469-b920-d6afa2905362}"
                  DTS:ExecutableType="Microsoft.ExecuteSQLTask"
                  DTS:LocaleID="-1"
                  DTS:ObjectName="Check File That Is Ready To Be Transferred"
                  DTS:TaskContact="Execute SQL Task; Microsoft Corporation; Microsoft SQL Server 2008 R2; © 2007 Microsoft Corporation; All Rights Reserved;http://www.microsoft.com/sql/support/default.asp;1"
                  DTS:ThreadHint="0">
                  <DTS:Variables />
                  <DTS:ObjectData>
                    <SQLTask:SqlTaskData
                      SQLTask:Connection="{D7BB1468-A27E-4377-B6CC-71887630C5F9}"
                      SQLTask:SqlStatementSource="/* Declare Local Variables */&#xA;DECLARE @fileTemplateId INT&#xA;DECLARE @monitoringConfigurationId INT&#xA;DECLARE @fileTemplateName NVARCHAR(64)&#xA;DECLARE @fileName NVARCHAR(128)&#xA;DECLARE @fileModifiedDatetime datetime&#xA;DECLARE @filePath NVARCHAR(255)&#xA;DECLARE @filePatternExtension NVARCHAR(128)&#xA;DECLARE @batchFilePath NVARCHAR(128) &#xA;DECLARE @extLength INT&#xA;DECLARE @countRow INT&#xA;DECLARE @command NVARCHAR(255)&#xA;DECLARE @rawFiles TABLE (ID int IDENTITY, FileProp NVARCHAR(500))&#xA;&#xA;/* Passing Variables SSIS Into Query &#xA; * Input Variables In SSIS : &#xA; * 1. fileId&#xA; * 2. monitoringConfigurationId&#xA; */&#xA;SET @fileTemplateId = ?&#xA;SET @monitoringConfigurationId = ?&#xA;&#xA;/* Retrieve Batch File Path Name In Table MasterBatchFile &#xA;   INNER JOIN Monitoring Configuration Based On @monitoringConfigurationId */&#xA;SET @batchFilePath = (SELECT mbf.PathName From MasterBatchFile as mbf&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;  INNER JOIN MonitoringConfiguration as mc ON mbf.Id = mc.BatchFileId&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;  WHERE mc.Id = @monitoringConfigurationId)&#xA;&#xA;/* Retrieve File Path Name In Table MasterPath &#xA;   INNER JOIN Monitoring Configuration Based On @monitoringConfigurationId */&#xA;SET @filePath = (SELECT mp.Name From MasterPath as mp&#xA;&#x9;&#x9;&#x9;&#x9; INNER JOIN MonitoringConfiguration as mc ON mp.Id = mc.PathId&#xA;&#x9;&#x9;&#x9;&#x9; WHERE mc.Id = @monitoringConfigurationId)&#xA;&#xA;/* Retrieve File Pattern Extension In Table MasterPath INNER JOIN MasterStatus &#xA;   INNER JOIN Monitoring Configuration Based On @monitoringConfigurationId */&#xA;SET @filePatternExtension = (SELECT mpe.Name FROM MasterPatternExtension AS mpe&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9; INNER JOIN MasterStatus AS ms ON ms.PatternExtensionId = mpe.Id&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9; INNER JOIN MonitoringConfiguration as mc ON mc.StatusId = ms.Id&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9; WHERE mc.Id = @monitoringConfigurationId)&#xA;&#xA;/* Retrieve File Template Name Based On @fileTemplateId */&#xA;SET @fileTemplateName = (SELECT Name From MasterFile where Id = @fileTemplateId)&#xA;&#xA;/* SET The Command For The CMD Shell */&#xA;SET @command = 'cd.. &amp;&amp; &quot;' + @batchFilePath + '&quot; ' + @filePath + ' ' + @fileTemplateName + ' ' + @filePatternExtension &#xA;&#xA;/* INSERT The Result From CMD Shell Into Table @rawFiles */&#xA;INSERT INTO @rawFiles EXECUTE xp_cmdshell @command&#xA;DELETE FROM @rawFiles WHERE FileProp LIKE 'dir%' OR FileProp LIKE 'No file%'&#xA;&#xA;/* Count the Number of Retrieved Files */&#xA;SET @countRow = (SELECT COUNT(FileProp) FROM @rawFiles &#xA;                 WHERE FileProp LIKE (SELECT '%' + @fileTemplateName + @filePatternExtension))&#xA;&#xA;IF @countRow &gt; 0&#xA;&#xA;&#x9;/* Retrieve File Name */&#xA;&#x9;SET @fileName = (SELECT left(SUBSTRING(FileProp, 65, 250), CHARINDEX('.', SUBSTRING(FileProp, 65, 250)) - 1) &#xA;&#x9;&#x9;&#x9;&#x9;&#x9; FROM @rawFiles&#xA;&#x9;&#x9;&#x9;&#x9;&#x9; WHERE FileProp LIKE (SELECT '%' + @fileTemplateName + @filePatternExtension))&#xA;&#x9;/* Retrieve File Date */&#xA;&#x9;SET @fileModifiedDatetime = (SELECT CAST(SUBSTRING(FileProp, 44, 20) as datetime) &#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9; FROM @rawFiles&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9; WHERE FileProp LIKE (SELECT '%' + @fileTemplateName + @filePatternExtension))&#xA;&#x9;&#xA;&#x9;INSERT INTO [FTPMonitoring].[staging].[RawFiles] (FileId, FileName, FileModifiedDatetime)&#xA;&#x9;SELECT @fileTemplateId, @fileName, @fileModifiedDatetime&#xA;&#x9;FROM @rawFiles WHERE FileProp LIKE (SELECT '%' + @fileTemplateName + @filePatternExtension)&#xA;&#xA;/* Return Value To SSIS&#xA; * Output Variable Name In SSIS : countRow&#xA; */&#xA;select @countRow"
                      SQLTask:ResultType="ResultSetType_SingleRow" xmlns:SQLTask="www.microsoft.com/sqlserver/dts/tasks/sqltask">
                      <SQLTask:ResultBinding
                        SQLTask:ResultName="0"
                        SQLTask:DtsVariableName="User::countRow" />
                      <SQLTask:ParameterBinding
                        SQLTask:ParameterName="0"
                        SQLTask:DtsVariableName="User::fileId"
                        SQLTask:ParameterDirection="Input"
                        SQLTask:DataType="131"
                        SQLTask:ParameterSize="18" />
                      <SQLTask:ParameterBinding
                        SQLTask:ParameterName="1"
                        SQLTask:DtsVariableName="User::monitoringConfigurationId"
                        SQLTask:ParameterDirection="Input"
                        SQLTask:DataType="131"
                        SQLTask:ParameterSize="18" />
                    </SQLTask:SqlTaskData>
                  </DTS:ObjectData>
                </DTS:Executable>
                <DTS:Executable
                  DTS:refId="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Equal 1\Insert New File Properties Into Monitoring Log Detail Table"
                  DTS:CreationName="Microsoft.ExecuteSQLTask"
                  DTS:Description="Execute SQL Task"
                  DTS:DTSID="{e42582f5-3c6f-412f-86be-d5365bfc4fd6}"
                  DTS:ExecutableType="Microsoft.ExecuteSQLTask"
                  DTS:LocaleID="-1"
                  DTS:ObjectName="Insert New File Properties Into Monitoring Log Detail Table"
                  DTS:TaskContact="Execute SQL Task; Microsoft Corporation; Microsoft SQL Server 2008 R2; © 2007 Microsoft Corporation; All Rights Reserved;http://www.microsoft.com/sql/support/default.asp;1"
                  DTS:ThreadHint="0">
                  <DTS:Variables />
                  <DTS:ObjectData>
                    <SQLTask:SqlTaskData
                      SQLTask:Connection="{D7BB1468-A27E-4377-B6CC-71887630C5F9}"
                      SQLTask:SqlStatementSource="DECLARE @monitoringLogId INT&#xA;DECLARE @monitoringConfigurationId INT&#xA;DECLARE @fileTemplateId INT&#xA;DECLARE @statusId INT&#xA;&#xA;/* Input Variables From SSIS&#xA; * Variables Name :&#xA; * 1. fileId&#xA; * 2. monitoringLogId&#xA; * 3. monitoringConfigurationId&#xA; */&#xA;SET @fileTemplateId = ?&#xA;SET @monitoringLogId = ?&#xA;SET @monitoringConfigurationId = ?&#xA; &#xA;/* Retrieve StatusId Based On Monitoring Configuration Id */&#xA;SET @statusId = (SELECT StatusId FROM MonitoringConfiguration &#xA;                 WHERE Id = @monitoringConfigurationId)&#xA;&#xA;/* Insert New File Properties From Table staging.RawFiles Into MonitoringLogDetail */&#xA;INSERT INTO dbo.MonitoringLogDetail (MonitoringLogId, FileName, FileModifiedDatetime, StatusId, ETLRunDatetime)&#xA;SELECT @monitoringLogId, FileName, FileModifiedDatetime, @statusId, GETDATE()&#xA;FROM staging.RawFiles rw&#xA;WHERE FileId = @fileTemplateId AND &#xA;      NOT EXISTS(SELECT * FROM MonitoringLogDetail mld &#xA;&#x9;             WHERE rw.FileName = mld.FileName AND rw.FileModifiedDatetime = mld.FileModifiedDatetime)&#xA;" xmlns:SQLTask="www.microsoft.com/sqlserver/dts/tasks/sqltask">
                      <SQLTask:ParameterBinding
                        SQLTask:ParameterName="0"
                        SQLTask:DtsVariableName="User::fileId"
                        SQLTask:ParameterDirection="Input"
                        SQLTask:DataType="131"
                        SQLTask:ParameterSize="18" />
                      <SQLTask:ParameterBinding
                        SQLTask:ParameterName="1"
                        SQLTask:DtsVariableName="User::monitoringLogId"
                        SQLTask:ParameterDirection="Input"
                        SQLTask:DataType="131"
                        SQLTask:ParameterSize="18" />
                      <SQLTask:ParameterBinding
                        SQLTask:ParameterName="2"
                        SQLTask:DtsVariableName="User::monitoringConfigurationId"
                        SQLTask:ParameterDirection="Input"
                        SQLTask:DataType="131"
                        SQLTask:ParameterSize="18" />
                    </SQLTask:SqlTaskData>
                  </DTS:ObjectData>
                </DTS:Executable>
                <DTS:Executable
                  DTS:refId="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Equal 1\Update Status On Monitoring Log Table"
                  DTS:CreationName="Microsoft.ExecuteSQLTask"
                  DTS:Description="Execute SQL Task"
                  DTS:DTSID="{c18c43d8-7d21-46cc-8751-b6637873e28b}"
                  DTS:ExecutableType="Microsoft.ExecuteSQLTask"
                  DTS:LocaleID="-1"
                  DTS:ObjectName="Update Status On Monitoring Log Table"
                  DTS:TaskContact="Execute SQL Task; Microsoft Corporation; Microsoft SQL Server 2008 R2; © 2007 Microsoft Corporation; All Rights Reserved;http://www.microsoft.com/sql/support/default.asp;1"
                  DTS:ThreadHint="0">
                  <DTS:Variables />
                  <DTS:ObjectData>
                    <SQLTask:SqlTaskData
                      SQLTask:Connection="{D7BB1468-A27E-4377-B6CC-71887630C5F9}"
                      SQLTask:SqlStatementSource="/* Update Status On MonitoringLogTable Where MonitoringLogId Equal Input&#xA; * Input Variable Name In SSIS :&#xA; * 1. monitoringLogId&#xA; */&#xA;UPDATE MonitoringLog SET Status = 1&#xA;WHERE Id = ?" xmlns:SQLTask="www.microsoft.com/sqlserver/dts/tasks/sqltask">
                      <SQLTask:ParameterBinding
                        SQLTask:ParameterName="0"
                        SQLTask:DtsVariableName="User::monitoringLogId"
                        SQLTask:ParameterDirection="Input"
                        SQLTask:DataType="131"
                        SQLTask:ParameterSize="18" />
                    </SQLTask:SqlTaskData>
                  </DTS:ObjectData>
                </DTS:Executable>
              </DTS:Executables>
              <DTS:PrecedenceConstraints>
                <DTS:PrecedenceConstraint
                  DTS:refId="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Equal 1.PrecedenceConstraints[Constraint]"
                  DTS:CreationName=""
                  DTS:DTSID="{547930A4-DD41-4E80-82A9-16BF43F61981}"
                  DTS:EvalOp="1"
                  DTS:Expression="@[User::countRow] &gt; 0"
                  DTS:From="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Equal 1\Check File That Is Ready To Be Transferred"
                  DTS:LogicalAnd="True"
                  DTS:ObjectName="Constraint"
                  DTS:To="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Equal 1\Update Status On Monitoring Log Table" />
                <DTS:PrecedenceConstraint
                  DTS:refId="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Equal 1.PrecedenceConstraints[Constraint 1]"
                  DTS:CreationName=""
                  DTS:DTSID="{4448A8E9-FB6E-4FA2-9BA1-0B99539A9E4B}"
                  DTS:From="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Equal 1\Update Status On Monitoring Log Table"
                  DTS:LogicalAnd="True"
                  DTS:ObjectName="Constraint 1"
                  DTS:To="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Equal 1\Insert New File Properties Into Monitoring Log Detail Table" />
              </DTS:PrecedenceConstraints>
            </DTS:Executable>
            <DTS:Executable
              DTS:refId="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Greater Than 1"
              DTS:CreationName="STOCK:SEQUENCE"
              DTS:Description="Sequence Container"
              DTS:DTSID="{62920FCA-8EBC-439B-983A-149E10818C04}"
              DTS:ExecutableType="STOCK:SEQUENCE"
              DTS:LocaleID="-1"
              DTS:ObjectName="Process If stateId Greater Than 1">
              <DTS:Variables />
              <DTS:Executables>
                <DTS:Executable
                  DTS:refId="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Greater Than 1\Check Number Of Files Which StatusId Equal Status Id Before"
                  DTS:CreationName="Microsoft.ExecuteSQLTask"
                  DTS:Description="Execute SQL Task"
                  DTS:DTSID="{63fc4d29-984c-4008-80ac-815ff983e908}"
                  DTS:ExecutableType="Microsoft.ExecuteSQLTask"
                  DTS:LocaleID="-1"
                  DTS:ObjectName="Check Number Of Files Which StatusId Equal Status Id Before"
                  DTS:TaskContact="Execute SQL Task; Microsoft Corporation; Microsoft SQL Server 2008 R2; © 2007 Microsoft Corporation; All Rights Reserved;http://www.microsoft.com/sql/support/default.asp;1"
                  DTS:ThreadHint="1">
                  <DTS:Variables />
                  <DTS:ObjectData>
                    <SQLTask:SqlTaskData
                      SQLTask:Connection="{D7BB1468-A27E-4377-B6CC-71887630C5F9}"
                      SQLTask:SqlStatementSource="DECLARE @monitoringLogId INT&#xA;DECLARE @monitoringConfigurationId Int&#xA;DECLARE @statusId INT&#xA;&#xA;SET @monitoringLogId = ?&#xA;SET @monitoringConfigurationId = ?&#xA;SET @statusId = (SELECT StatusId FROM MonitoringConfiguration&#xA;                 WHERE Id = @monitoringConfigurationId)&#xA;&#xA;SELECT COUNT(FileName) from dbo.MonitoringLogDetail &#xA;where MonitoringLogId = @monitoringLogId and StatusId = @statusId"
                      SQLTask:ResultType="ResultSetType_SingleRow" xmlns:SQLTask="www.microsoft.com/sqlserver/dts/tasks/sqltask">
                      <SQLTask:ResultBinding
                        SQLTask:ResultName="0"
                        SQLTask:DtsVariableName="User::countRow" />
                      <SQLTask:ParameterBinding
                        SQLTask:ParameterName="0"
                        SQLTask:DtsVariableName="User::monitoringLogId"
                        SQLTask:ParameterDirection="Input"
                        SQLTask:DataType="131"
                        SQLTask:ParameterSize="18" />
                      <SQLTask:ParameterBinding
                        SQLTask:ParameterName="1"
                        SQLTask:DtsVariableName="User::monitoringConfigurationIdBefore"
                        SQLTask:ParameterDirection="Input"
                        SQLTask:DataType="131"
                        SQLTask:ParameterSize="18" />
                    </SQLTask:SqlTaskData>
                  </DTS:ObjectData>
                </DTS:Executable>
                <DTS:Executable
                  DTS:refId="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Greater Than 1\Foreach Loop FileName Collection"
                  DTS:CreationName="STOCK:FOREACHLOOP"
                  DTS:Description="Foreach Loop Container"
                  DTS:DTSID="{22028B32-CA61-457A-B918-D0E7EC9950EB}"
                  DTS:ExecutableType="STOCK:FOREACHLOOP"
                  DTS:LocaleID="-1"
                  DTS:ObjectName="Foreach Loop FileName Collection">
                  <DTS:ForEachEnumerator
                    DTS:CreationName="Microsoft.ForEachADOEnumerator"
                    DTS:DTSID="{2DAE649B-9C6E-4419-A1FB-764D5F722FD1}"
                    DTS:ObjectName="{2DAE649B-9C6E-4419-A1FB-764D5F722FD1}">
                    <DTS:ObjectData>
                      <FEEADO
                        EnumType="EnumerateRowsInFirstTable"
                        VarName="User::fileNameCollection" />
                    </DTS:ObjectData>
                  </DTS:ForEachEnumerator>
                  <DTS:Variables />
                  <DTS:Executables>
                    <DTS:Executable
                      DTS:refId="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Greater Than 1\Foreach Loop FileName Collection\Check File Availability On FTP Server"
                      DTS:CreationName="Microsoft.ExecuteSQLTask"
                      DTS:Description="Execute SQL Task"
                      DTS:DTSID="{92D0187D-C553-4009-833E-831111AE80DB}"
                      DTS:ExecutableType="Microsoft.ExecuteSQLTask"
                      DTS:LocaleID="-1"
                      DTS:ObjectName="Check File Availability On FTP Server"
                      DTS:TaskContact="Execute SQL Task; Microsoft Corporation; Microsoft SQL Server 2008 R2; © 2007 Microsoft Corporation; All Rights Reserved;http://www.microsoft.com/sql/support/default.asp;1"
                      DTS:ThreadHint="1">
                      <DTS:Variables />
                      <DTS:ObjectData>
                        <SQLTask:SqlTaskData
                          SQLTask:Connection="{D7BB1468-A27E-4377-B6CC-71887630C5F9}"
                          SQLTask:SqlStatementSource="DECLARE @monitoringConfigurationId INT&#xA;DECLARE @fileName NVARCHAR(128)&#xA;DECLARE @batchFilePath NVARCHAR(128)&#xA;DECLARE @filePath NVARCHAR(128)&#xA;DECLARE @filePatternExtension NVARCHAR(128)&#xA;DECLARE @newFileModifiedDatetime datetime&#xA;DECLARE @countRow INT&#xA;DECLARE @command NVARCHAR(255)&#xA;DECLARE @rawFiles TABLE (ID int IDENTITY, FileProp NVARCHAR(500))&#xA;&#xA;/* Passing Variables SSIS Into Query &#xA; * Input Variables In SSIS : &#xA; * 1. fileName&#xA; * 2. monitoringConfigurationId&#xA; */&#xA;SET @fileName = ?&#xA;SET @monitoringConfigurationId = ?&#xA;&#xA;/* Retrieve Batch File Path Name In Table MasterBatchFile &#xA;   INNER JOIN Monitoring Configuration Based On @monitoringConfigurationId */&#xA;SET @batchFilePath = (SELECT mbf.PathName From MasterBatchFile as mbf&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;  INNER JOIN MonitoringConfiguration as mc ON mbf.Id = mc.BatchFileId&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;  WHERE mc.Id = @monitoringConfigurationId)&#xA;&#xA;/* Retrieve File Path Name In Table MasterPath &#xA;   INNER JOIN Monitoring Configuration Based On @monitoringConfigurationId */&#xA;SET @filePath = (SELECT mp.Name From MasterPath as mp&#xA;&#x9;&#x9;&#x9;&#x9; INNER JOIN MonitoringConfiguration as mc ON mp.Id = mc.PathId&#xA;&#x9;&#x9;&#x9;&#x9; WHERE mc.Id = @monitoringConfigurationId)&#xA;&#xA;/* Retrieve File Pattern Extension In Table MasterPath INNER JOIN MasterStatus &#xA;   INNER JOIN Monitoring Configuration Based On @monitoringConfigurationId */&#xA;SET @filePatternExtension = (SELECT mpe.Name FROM MasterPatternExtension AS mpe&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9; INNER JOIN MasterStatus AS ms ON ms.PatternExtensionId = mpe.Id&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9; INNER JOIN MonitoringConfiguration as mc ON mc.StatusId = ms.Id&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9; WHERE mc.Id = @monitoringConfigurationId)&#xA;&#xA;/* SET The Command For The CMD Shell */&#xA;SET @command = '&quot;' + @batchFilePath + '&quot; ' + @filePath + ' ' + @fileName + ' ' + @filePatternExtension &#xA;&#xA;INSERT INTO @rawFiles EXECUTE xp_cmdshell @command&#xA;DELETE FROM @rawFiles WHERE FileProp like 'dir%' or FileProp like 'No file%'&#xA;&#xA;SET @countRow = (SELECT COUNT(FileProp) from @rawFiles &#xA;&#x9;&#x9;&#x9;&#x9; where FileProp like (SELECT '%' + @fileName + @filePatternExtension))&#xA;&#xA;IF @countRow &gt; 0&#xA;&#x9;/* Retrieve New FileModifiedDatetime */&#xA;&#x9;SET @newFileModifiedDatetime = (SELECT cast(SUBSTRING(FileProp, 1, 21) as datetime)&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;            from @rawFiles&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;where FileProp like (SELECT '%' + @fileName + @filePatternExtension))&#xA;&#x9;&#x9;&#xA;SELECT @countRow"
                          SQLTask:ResultType="ResultSetType_SingleRow" xmlns:SQLTask="www.microsoft.com/sqlserver/dts/tasks/sqltask">
                          <SQLTask:ResultBinding
                            SQLTask:ResultName="0"
                            SQLTask:DtsVariableName="User::countRow" />
                          <SQLTask:ParameterBinding
                            SQLTask:ParameterName="0"
                            SQLTask:DtsVariableName="User::fileName"
                            SQLTask:ParameterDirection="Input"
                            SQLTask:DataType="130"
                            SQLTask:ParameterSize="128" />
                          <SQLTask:ParameterBinding
                            SQLTask:ParameterName="1"
                            SQLTask:DtsVariableName="User::monitoringConfigurationId"
                            SQLTask:ParameterDirection="Input"
                            SQLTask:DataType="131"
                            SQLTask:ParameterSize="18" />
                        </SQLTask:SqlTaskData>
                      </DTS:ObjectData>
                    </DTS:Executable>
                    <DTS:Executable
                      DTS:refId="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Greater Than 1\Foreach Loop FileName Collection\Insert Into History Monitoring Log"
                      DTS:CreationName="Microsoft.ExecuteSQLTask"
                      DTS:Description="Execute SQL Task"
                      DTS:DTSID="{D754B83B-068E-4531-B95E-317B875E26B5}"
                      DTS:ExecutableType="Microsoft.ExecuteSQLTask"
                      DTS:LocaleID="-1"
                      DTS:ObjectName="Insert Into History Monitoring Log"
                      DTS:TaskContact="Execute SQL Task; Microsoft Corporation; Microsoft SQL Server 2008 R2; © 2007 Microsoft Corporation; All Rights Reserved;http://www.microsoft.com/sql/support/default.asp;1"
                      DTS:ThreadHint="1">
                      <DTS:Variables />
                      <DTS:ObjectData>
                        <SQLTask:SqlTaskData
                          SQLTask:Connection="{D7BB1468-A27E-4377-B6CC-71887630C5F9}"
                          SQLTask:SqlStatementSource="DECLARE @fileTemplateId INT&#xA;DECLARE @fileName NVARCHAR(128)&#xA;&#xA;/* Input Variables&#xA; * Variables Name In SSIS :&#xA; * 1. fileId&#xA; * 2. fileName&#xA; */&#xA;SET @fileTemplateId = ?&#xA;SET @fileName = ?&#xA;&#xA;/* Insert Current State On Monitoring Log Detail Based On FileName Into History Monitoring Log Table */&#xA;INSERT INTO dbo.HistoryMonitoringLog (MonitoringLogDate, FileId, FileName, FileModifiedDatetime, StatusId, ETLRunDatetime)&#xA;SELECT GETDATE(), @fileTemplateId, FileName, FileModifiedDatetime, StatusId, ETLRunDatetime &#xA;FROM dbo.MonitoringLogDetail&#xA;WHERE FileName = @fileName" xmlns:SQLTask="www.microsoft.com/sqlserver/dts/tasks/sqltask">
                          <SQLTask:ParameterBinding
                            SQLTask:ParameterName="0"
                            SQLTask:DtsVariableName="User::fileId"
                            SQLTask:ParameterDirection="Input"
                            SQLTask:DataType="131"
                            SQLTask:ParameterSize="18" />
                          <SQLTask:ParameterBinding
                            SQLTask:ParameterName="1"
                            SQLTask:DtsVariableName="User::fileName"
                            SQLTask:ParameterDirection="Input"
                            SQLTask:DataType="130"
                            SQLTask:ParameterSize="128" />
                        </SQLTask:SqlTaskData>
                      </DTS:ObjectData>
                    </DTS:Executable>
                    <DTS:Executable
                      DTS:refId="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Greater Than 1\Foreach Loop FileName Collection\Update Monitoring Log Detail Table"
                      DTS:CreationName="Microsoft.ExecuteSQLTask"
                      DTS:Description="Execute SQL Task"
                      DTS:DTSID="{E8BA091F-280A-4839-B4AA-8147511DD7D9}"
                      DTS:ExecutableType="Microsoft.ExecuteSQLTask"
                      DTS:LocaleID="-1"
                      DTS:ObjectName="Update Monitoring Log Detail Table"
                      DTS:TaskContact="Execute SQL Task; Microsoft Corporation; Microsoft SQL Server 2008 R2; © 2007 Microsoft Corporation; All Rights Reserved;http://www.microsoft.com/sql/support/default.asp;1"
                      DTS:ThreadHint="1">
                      <DTS:Variables />
                      <DTS:ObjectData>
                        <SQLTask:SqlTaskData
                          SQLTask:Connection="{D7BB1468-A27E-4377-B6CC-71887630C5F9}"
                          SQLTask:SqlStatementSource="DECLARE @monitoringLogId INT&#xA;DECLARE @monitoringConfigurationId INT&#xA;DECLARE @fileName NVARCHAR(128)&#xA;DECLARE @statusId INT&#xA;&#xA;SET @monitoringLogId = ?&#xA;SET @monitoringConfigurationId = ?&#xA;SET @fileName = ?&#xA;SET @statusId = (SELECT StatusId FROM MonitoringConfiguration &#xA;                 WHERE Id = @monitoringConfigurationId)&#xA;&#xA;UPDATE dbo.MonitoringLogDetail&#xA;SET StatusId = @statusId&#xA;   ,ETLRunDatetime = GETDATE()&#xA;WHERE MonitoringLogId = @monitoringLogId AND FileName = @fileName" xmlns:SQLTask="www.microsoft.com/sqlserver/dts/tasks/sqltask">
                          <SQLTask:ParameterBinding
                            SQLTask:ParameterName="0"
                            SQLTask:DtsVariableName="User::monitoringLogId"
                            SQLTask:ParameterDirection="Input"
                            SQLTask:DataType="131"
                            SQLTask:ParameterSize="18" />
                          <SQLTask:ParameterBinding
                            SQLTask:ParameterName="1"
                            SQLTask:DtsVariableName="User::monitoringConfigurationId"
                            SQLTask:ParameterDirection="Input"
                            SQLTask:DataType="131"
                            SQLTask:ParameterSize="18" />
                          <SQLTask:ParameterBinding
                            SQLTask:ParameterName="2"
                            SQLTask:DtsVariableName="User::fileName"
                            SQLTask:ParameterDirection="Input"
                            SQLTask:DataType="130"
                            SQLTask:ParameterSize="128" />
                        </SQLTask:SqlTaskData>
                      </DTS:ObjectData>
                    </DTS:Executable>
                  </DTS:Executables>
                  <DTS:PrecedenceConstraints>
                    <DTS:PrecedenceConstraint
                      DTS:refId="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Greater Than 1\Foreach Loop FileName Collection.PrecedenceConstraints[Constraint]"
                      DTS:CreationName=""
                      DTS:DTSID="{94E32889-6C53-4D65-A5ED-5156C722BA21}"
                      DTS:EvalOp="1"
                      DTS:Expression="@[User::countRow] &gt; 0"
                      DTS:From="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Greater Than 1\Foreach Loop FileName Collection\Check File Availability On FTP Server"
                      DTS:LogicalAnd="True"
                      DTS:ObjectName="Constraint"
                      DTS:To="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Greater Than 1\Foreach Loop FileName Collection\Insert Into History Monitoring Log" />
                    <DTS:PrecedenceConstraint
                      DTS:refId="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Greater Than 1\Foreach Loop FileName Collection.PrecedenceConstraints[Constraint 1]"
                      DTS:CreationName=""
                      DTS:DTSID="{5574D597-AE0E-49B4-B641-D5FCC7350CF0}"
                      DTS:From="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Greater Than 1\Foreach Loop FileName Collection\Insert Into History Monitoring Log"
                      DTS:LogicalAnd="True"
                      DTS:ObjectName="Constraint 1"
                      DTS:To="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Greater Than 1\Foreach Loop FileName Collection\Update Monitoring Log Detail Table" />
                  </DTS:PrecedenceConstraints>
                  <DTS:ForEachVariableMappings>
                    <DTS:ForEachVariableMapping
                      DTS:CreationName=""
                      DTS:DTSID="{87ED7B7A-170F-4C1F-9A0D-461D2CD5D7F1}"
                      DTS:ObjectName="{87ED7B7A-170F-4C1F-9A0D-461D2CD5D7F1}"
                      DTS:ValueIndex="0"
                      DTS:VariableName="User::fileName" />
                  </DTS:ForEachVariableMappings>
                </DTS:Executable>
                <DTS:Executable
                  DTS:refId="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Greater Than 1\Retrieve File Names"
                  DTS:CreationName="Microsoft.ExecuteSQLTask"
                  DTS:Description="Execute SQL Task"
                  DTS:DTSID="{0ADDDF8C-F7F6-44F3-B87B-C4E3886A365E}"
                  DTS:ExecutableType="Microsoft.ExecuteSQLTask"
                  DTS:LocaleID="-1"
                  DTS:ObjectName="Retrieve File Names"
                  DTS:TaskContact="Execute SQL Task; Microsoft Corporation; Microsoft SQL Server 2008 R2; © 2007 Microsoft Corporation; All Rights Reserved;http://www.microsoft.com/sql/support/default.asp;1"
                  DTS:ThreadHint="1">
                  <DTS:Variables />
                  <DTS:ObjectData>
                    <SQLTask:SqlTaskData
                      SQLTask:Connection="{D7BB1468-A27E-4377-B6CC-71887630C5F9}"
                      SQLTask:SqlStatementSource="DECLARE @monitoringLogId INT&#xA;DECLARE @monitoringConfigurationId Int&#xA;DECLARE @statusId INT&#xA;&#xA;SET @monitoringLogId = ?&#xA;SET @monitoringConfigurationId = ?&#xA;SET @statusId = (SELECT StatusId FROM MonitoringConfiguration&#xA;                 WHERE Id = @monitoringConfigurationId)&#xA;&#xA;SELECT FileName from dbo.MonitoringLogDetail &#xA;where MonitoringLogId = @monitoringLogId and StatusId = @statusId"
                      SQLTask:ResultType="ResultSetType_Rowset" xmlns:SQLTask="www.microsoft.com/sqlserver/dts/tasks/sqltask">
                      <SQLTask:ResultBinding
                        SQLTask:ResultName="0"
                        SQLTask:DtsVariableName="User::fileNameCollection" />
                      <SQLTask:ParameterBinding
                        SQLTask:ParameterName="0"
                        SQLTask:DtsVariableName="User::monitoringLogId"
                        SQLTask:ParameterDirection="Input"
                        SQLTask:DataType="131"
                        SQLTask:ParameterSize="18" />
                      <SQLTask:ParameterBinding
                        SQLTask:ParameterName="1"
                        SQLTask:DtsVariableName="User::monitoringConfigurationIdBefore"
                        SQLTask:ParameterDirection="Input"
                        SQLTask:DataType="131"
                        SQLTask:ParameterSize="18" />
                    </SQLTask:SqlTaskData>
                  </DTS:ObjectData>
                </DTS:Executable>
              </DTS:Executables>
              <DTS:PrecedenceConstraints>
                <DTS:PrecedenceConstraint
                  DTS:refId="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Greater Than 1.PrecedenceConstraints[Constraint]"
                  DTS:CreationName=""
                  DTS:DTSID="{B70DA7CC-AD65-4D0D-99D0-121523C1FBDE}"
                  DTS:EvalOp="1"
                  DTS:Expression="@[User::countRow] &gt; 0"
                  DTS:From="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Greater Than 1\Check Number Of Files Which StatusId Equal Status Id Before"
                  DTS:LogicalAnd="True"
                  DTS:ObjectName="Constraint"
                  DTS:To="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Greater Than 1\Retrieve File Names" />
                <DTS:PrecedenceConstraint
                  DTS:refId="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Greater Than 1.PrecedenceConstraints[Constraint 1]"
                  DTS:CreationName=""
                  DTS:DTSID="{343E5162-F18C-4165-B52E-984DA54B5BBB}"
                  DTS:From="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Greater Than 1\Retrieve File Names"
                  DTS:LogicalAnd="True"
                  DTS:ObjectName="Constraint 1"
                  DTS:To="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Greater Than 1\Foreach Loop FileName Collection" />
              </DTS:PrecedenceConstraints>
            </DTS:Executable>
            <DTS:Executable
              DTS:refId="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Retrieve StateId Based On Monitoring Configuration Id"
              DTS:CreationName="Microsoft.ExecuteSQLTask"
              DTS:Description="Execute SQL Task"
              DTS:DTSID="{968938F1-9285-4573-9016-848B32819E39}"
              DTS:ExecutableType="Microsoft.ExecuteSQLTask"
              DTS:LocaleID="-1"
              DTS:ObjectName="Retrieve StateId Based On Monitoring Configuration Id"
              DTS:TaskContact="Execute SQL Task; Microsoft Corporation; Microsoft SQL Server 2008 R2; © 2007 Microsoft Corporation; All Rights Reserved;http://www.microsoft.com/sql/support/default.asp;1"
              DTS:ThreadHint="0">
              <DTS:Variables />
              <DTS:ObjectData>
                <SQLTask:SqlTaskData
                  SQLTask:Connection="{D7BB1468-A27E-4377-B6CC-71887630C5F9}"
                  SQLTask:SqlStatementSource="/* Return StateId Based On Monitoring Configuration Id&#xA; * Input Variable Name In SSIS :&#xA; * 1. monitoringConfigurationId&#xA; * Output Variable Name In SSIS :&#xA; * 1. stateId&#xA; */&#xA;SELECT StateId FROM MonitoringConfiguration&#xA;WHERE Id = ? "
                  SQLTask:ResultType="ResultSetType_SingleRow" xmlns:SQLTask="www.microsoft.com/sqlserver/dts/tasks/sqltask">
                  <SQLTask:ResultBinding
                    SQLTask:ResultName="0"
                    SQLTask:DtsVariableName="User::stateId" />
                  <SQLTask:ParameterBinding
                    SQLTask:ParameterName="0"
                    SQLTask:DtsVariableName="User::monitoringConfigurationId"
                    SQLTask:ParameterDirection="Input"
                    SQLTask:DataType="131"
                    SQLTask:ParameterSize="18" />
                </SQLTask:SqlTaskData>
              </DTS:ObjectData>
            </DTS:Executable>
            <DTS:Executable
              DTS:refId="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Store Current Monitoring Configuration Id"
              DTS:CreationName="Microsoft.ExecuteSQLTask"
              DTS:Description="Execute SQL Task"
              DTS:DTSID="{24F5451B-68A2-4538-B08E-D8907A552E37}"
              DTS:ExecutableType="Microsoft.ExecuteSQLTask"
              DTS:LocaleID="-1"
              DTS:ObjectName="Store Current Monitoring Configuration Id"
              DTS:TaskContact="Execute SQL Task; Microsoft Corporation; Microsoft SQL Server 2008 R2; © 2007 Microsoft Corporation; All Rights Reserved;http://www.microsoft.com/sql/support/default.asp;1"
              DTS:ThreadHint="2">
              <DTS:Variables />
              <DTS:ObjectData>
                <SQLTask:SqlTaskData
                  SQLTask:Connection="{D7BB1468-A27E-4377-B6CC-71887630C5F9}"
                  SQLTask:SqlStatementSource="DECLARE @currentMonitoringConfigurationId INT&#xA;&#xA;SELECT @currentMonitoringConfigurationId&#xA;"
                  SQLTask:ResultType="ResultSetType_SingleRow" xmlns:SQLTask="www.microsoft.com/sqlserver/dts/tasks/sqltask">
                  <SQLTask:ResultBinding
                    SQLTask:ResultName="0"
                    SQLTask:DtsVariableName="User::monitoringConfigurationIdBefore" />
                  <SQLTask:ParameterBinding
                    SQLTask:ParameterName="0"
                    SQLTask:DtsVariableName="User::monitoringConfigurationId"
                    SQLTask:ParameterDirection="Input"
                    SQLTask:DataType="131"
                    SQLTask:ParameterSize="18" />
                </SQLTask:SqlTaskData>
              </DTS:ObjectData>
            </DTS:Executable>
          </DTS:Executables>
          <DTS:PrecedenceConstraints>
            <DTS:PrecedenceConstraint
              DTS:refId="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection.PrecedenceConstraints[Constraint]"
              DTS:CreationName=""
              DTS:DTSID="{CF7CD313-DF8F-4CC6-8419-7D45D8CA0174}"
              DTS:EvalOp="1"
              DTS:Expression="@[User::stateId] == 1"
              DTS:From="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Retrieve StateId Based On Monitoring Configuration Id"
              DTS:LogicalAnd="True"
              DTS:ObjectName="Constraint"
              DTS:To="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Equal 1" />
            <DTS:PrecedenceConstraint
              DTS:refId="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection.PrecedenceConstraints[Constraint 1]"
              DTS:CreationName=""
              DTS:DTSID="{31A2D1AF-C1BD-46D1-BEF1-C781EAF3F9DA}"
              DTS:EvalOp="1"
              DTS:Expression="@[User::stateId] &gt; 1"
              DTS:From="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Retrieve StateId Based On Monitoring Configuration Id"
              DTS:LogicalAnd="True"
              DTS:ObjectName="Constraint 1"
              DTS:To="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Greater Than 1" />
            <DTS:PrecedenceConstraint
              DTS:refId="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection.PrecedenceConstraints[Constraint 2]"
              DTS:CreationName=""
              DTS:DTSID="{9E979D43-7B65-4360-9C72-FBAB9355AC03}"
              DTS:From="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Equal 1"
              DTS:ObjectName="Constraint 2"
              DTS:To="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Store Current Monitoring Configuration Id" />
            <DTS:PrecedenceConstraint
              DTS:refId="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection.PrecedenceConstraints[Constraint 3]"
              DTS:CreationName=""
              DTS:DTSID="{8F572532-040C-4E5B-940B-C282BDC1DB1F}"
              DTS:From="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Greater Than 1"
              DTS:ObjectName="Constraint 3"
              DTS:To="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Store Current Monitoring Configuration Id" />
          </DTS:PrecedenceConstraints>
          <DTS:ForEachVariableMappings>
            <DTS:ForEachVariableMapping
              DTS:CreationName=""
              DTS:DTSID="{40BFAA69-F452-446F-83DC-AED2EE9AD379}"
              DTS:ObjectName="{40BFAA69-F452-446F-83DC-AED2EE9AD379}"
              DTS:ValueIndex="0"
              DTS:VariableName="User::monitoringConfigurationId" />
          </DTS:ForEachVariableMappings>
        </DTS:Executable>
        <DTS:Executable
          DTS:refId="Package\Foreach Loop File Template Id Collection\Retrieve Monitoring Configuration Id Colection"
          DTS:CreationName="Microsoft.ExecuteSQLTask"
          DTS:Description="Execute SQL Task"
          DTS:DTSID="{0e181c64-dce3-4cee-9a44-cded0dbbb1cc}"
          DTS:ExecutableType="Microsoft.ExecuteSQLTask"
          DTS:LocaleID="-1"
          DTS:ObjectName="Retrieve Monitoring Configuration Id Colection"
          DTS:TaskContact="Execute SQL Task; Microsoft Corporation; Microsoft SQL Server 2008 R2; © 2007 Microsoft Corporation; All Rights Reserved;http://www.microsoft.com/sql/support/default.asp;1"
          DTS:ThreadHint="0">
          <DTS:Variables />
          <DTS:ObjectData>
            <SQLTask:SqlTaskData
              SQLTask:Connection="{D7BB1468-A27E-4377-B6CC-71887630C5F9}"
              SQLTask:SqlStatementSource="/* Return Monitoring Configuration Id Based On FileId Order By Sequence Order&#xA; * Input Variable Name In SSIS&#xA; * 1. fileId&#xA; * Output Variable Name In SSIS&#xA; * 1. monitoringConfigurationIds&#xA; */&#xA;SELECT Id FROM MonitoringConfiguration&#xA;WHERE FileId = ?&#xA;ORDER BY SequenceOrder"
              SQLTask:ResultType="ResultSetType_Rowset" xmlns:SQLTask="www.microsoft.com/sqlserver/dts/tasks/sqltask">
              <SQLTask:ResultBinding
                SQLTask:ResultName="0"
                SQLTask:DtsVariableName="User::monitoringConfigurationIdCollection" />
              <SQLTask:ParameterBinding
                SQLTask:ParameterName="0"
                SQLTask:DtsVariableName="User::fileId"
                SQLTask:ParameterDirection="Input"
                SQLTask:DataType="131"
                SQLTask:ParameterSize="18" />
            </SQLTask:SqlTaskData>
          </DTS:ObjectData>
        </DTS:Executable>
        <DTS:Executable
          DTS:refId="Package\Foreach Loop File Template Id Collection\Retrieve Monitoring Log Id"
          DTS:CreationName="Microsoft.ExecuteSQLTask"
          DTS:Description="Execute SQL Task"
          DTS:DTSID="{fab1185f-1b58-4c26-b9fb-4c77b376919e}"
          DTS:ExecutableType="Microsoft.ExecuteSQLTask"
          DTS:LocaleID="-1"
          DTS:ObjectName="Retrieve Monitoring Log Id"
          DTS:TaskContact="Execute SQL Task; Microsoft Corporation; Microsoft SQL Server 2008 R2; © 2007 Microsoft Corporation; All Rights Reserved;http://www.microsoft.com/sql/support/default.asp;1"
          DTS:ThreadHint="0">
          <DTS:Variables />
          <DTS:ObjectData>
            <SQLTask:SqlTaskData
              SQLTask:Connection="{D7BB1468-A27E-4377-B6CC-71887630C5F9}"
              SQLTask:SqlStatementSource="/* Return Monitoring Log Id Based On FileId&#xA; * Input Variable Name In SSIS :&#xA; * 1. fileId&#xA; */  &#xA;SELECT Id FROM MonitoringLog &#xA;WHERE FileId = ?"
              SQLTask:ResultType="ResultSetType_SingleRow" xmlns:SQLTask="www.microsoft.com/sqlserver/dts/tasks/sqltask">
              <SQLTask:ResultBinding
                SQLTask:ResultName="0"
                SQLTask:DtsVariableName="User::monitoringLogId" />
              <SQLTask:ParameterBinding
                SQLTask:ParameterName="0"
                SQLTask:DtsVariableName="User::fileId"
                SQLTask:ParameterDirection="Input"
                SQLTask:DataType="131"
                SQLTask:ParameterSize="18" />
            </SQLTask:SqlTaskData>
          </DTS:ObjectData>
        </DTS:Executable>
        <DTS:Executable
          DTS:refId="Package\Foreach Loop File Template Id Collection\Truncate Staging Raw Files Table"
          DTS:CreationName="Microsoft.ExecuteSQLTask"
          DTS:Description="Execute SQL Task"
          DTS:DTSID="{123A20C0-0729-4C78-99AA-F144CA740F66}"
          DTS:ExecutableType="Microsoft.ExecuteSQLTask"
          DTS:LocaleID="-1"
          DTS:ObjectName="Truncate Staging Raw Files Table"
          DTS:TaskContact="Execute SQL Task; Microsoft Corporation; Microsoft SQL Server 2008 R2; © 2007 Microsoft Corporation; All Rights Reserved;http://www.microsoft.com/sql/support/default.asp;1"
          DTS:ThreadHint="0">
          <DTS:Variables />
          <DTS:ObjectData>
            <SQLTask:SqlTaskData
              SQLTask:Connection="{D7BB1468-A27E-4377-B6CC-71887630C5F9}"
              SQLTask:SqlStatementSource="TRUNCATE TABLE staging.RawFiles" xmlns:SQLTask="www.microsoft.com/sqlserver/dts/tasks/sqltask" />
          </DTS:ObjectData>
        </DTS:Executable>
      </DTS:Executables>
      <DTS:PrecedenceConstraints>
        <DTS:PrecedenceConstraint
          DTS:refId="Package\Foreach Loop File Template Id Collection.PrecedenceConstraints[Constraint]"
          DTS:CreationName=""
          DTS:DTSID="{E97ED42D-B11B-4E56-8533-B6870E691653}"
          DTS:From="Package\Foreach Loop File Template Id Collection\Truncate Staging Raw Files Table"
          DTS:LogicalAnd="True"
          DTS:ObjectName="Constraint"
          DTS:To="Package\Foreach Loop File Template Id Collection\Retrieve Monitoring Log Id" />
        <DTS:PrecedenceConstraint
          DTS:refId="Package\Foreach Loop File Template Id Collection.PrecedenceConstraints[Constraint 1]"
          DTS:CreationName=""
          DTS:DTSID="{54290A1C-1D28-4752-B921-B4EB14D398DA}"
          DTS:From="Package\Foreach Loop File Template Id Collection\Retrieve Monitoring Log Id"
          DTS:LogicalAnd="True"
          DTS:ObjectName="Constraint 1"
          DTS:To="Package\Foreach Loop File Template Id Collection\Retrieve Monitoring Configuration Id Colection" />
        <DTS:PrecedenceConstraint
          DTS:refId="Package\Foreach Loop File Template Id Collection.PrecedenceConstraints[Constraint 2]"
          DTS:CreationName=""
          DTS:DTSID="{5C602CA0-1899-4B6E-9576-E312BF5593F5}"
          DTS:From="Package\Foreach Loop File Template Id Collection\Retrieve Monitoring Configuration Id Colection"
          DTS:LogicalAnd="True"
          DTS:ObjectName="Constraint 2"
          DTS:To="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection" />
      </DTS:PrecedenceConstraints>
      <DTS:ForEachVariableMappings>
        <DTS:ForEachVariableMapping
          DTS:CreationName=""
          DTS:DTSID="{BBCFB1F3-DA9B-4521-8AB3-9844B9719CA8}"
          DTS:ObjectName="{BBCFB1F3-DA9B-4521-8AB3-9844B9719CA8}"
          DTS:ValueIndex="0"
          DTS:VariableName="User::fileId" />
      </DTS:ForEachVariableMappings>
    </DTS:Executable>
    <DTS:Executable
      DTS:refId="Package\Retrieve File Template Id"
      DTS:CreationName="Microsoft.ExecuteSQLTask"
      DTS:Description="Execute SQL Task"
      DTS:DTSID="{5EBFAB1D-42C2-48C7-8D40-A2D2F5571B19}"
      DTS:ExecutableType="Microsoft.ExecuteSQLTask"
      DTS:LocaleID="-1"
      DTS:ObjectName="Retrieve File Template Id"
      DTS:TaskContact="Execute SQL Task; Microsoft Corporation; Microsoft SQL Server 2008 R2; © 2007 Microsoft Corporation; All Rights Reserved;http://www.microsoft.com/sql/support/default.asp;1"
      DTS:ThreadHint="0">
      <DTS:Variables />
      <DTS:ObjectData>
        <SQLTask:SqlTaskData
          SQLTask:Connection="{D7BB1468-A27E-4377-B6CC-71887630C5F9}"
          SQLTask:SqlStatementSource="/* Return FileId Into SSIS&#xA; * Variable Name In SSIS = fileIds&#xA; */&#x9;&#xA;SELECT Id FROM MasterFile &#xA;WHERE SroId = 1"
          SQLTask:ResultType="ResultSetType_Rowset" xmlns:SQLTask="www.microsoft.com/sqlserver/dts/tasks/sqltask">
          <SQLTask:ResultBinding
            SQLTask:ResultName="0"
            SQLTask:DtsVariableName="User::fileIdCollection" />
        </SQLTask:SqlTaskData>
      </DTS:ObjectData>
    </DTS:Executable>
  </DTS:Executables>
  <DTS:PrecedenceConstraints>
    <DTS:PrecedenceConstraint
      DTS:refId="Package.PrecedenceConstraints[Constraint]"
      DTS:CreationName=""
      DTS:DTSID="{7053255B-FC02-48A0-8530-8AFDB5D3CD0C}"
      DTS:From="Package\Retrieve File Template Id"
      DTS:LogicalAnd="True"
      DTS:ObjectName="Constraint"
      DTS:To="Package\Foreach Loop File Template Id Collection" />
  </DTS:PrecedenceConstraints>
  <DTS:DesignTimeProperties><![CDATA[<?xml version="1.0"?>
<!--This CDATA section contains the layout information of the package. The section includes information such as (x,y) coordinates, width, and height.-->
<!--If you manually edit this section and make a mistake, you can delete it. -->
<!--The package will still be able to load normally but the previous layout information will be lost and the designer will automatically re-arrange the elements on the design surface.-->
<Objects
  Version="8">
  <!--Each node below will contain properties that do not affect runtime behavior.-->
  <Package
    design-time-name="Package">
    <LayoutInfo>
      <GraphLayout
        Capacity="64" xmlns="clr-namespace:Microsoft.SqlServer.IntegrationServices.Designer.Model.Serialization;assembly=Microsoft.SqlServer.IntegrationServices.Graph" xmlns:mssgle="clr-namespace:Microsoft.SqlServer.Graph.LayoutEngine;assembly=Microsoft.SqlServer.Graph" xmlns:assembly="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:mssgm="clr-namespace:Microsoft.SqlServer.Graph.Model;assembly=Microsoft.SqlServer.Graph">
        <NodeLayout
          Size="216,44"
          Id="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Equal 1\Check File That Is Ready To Be Transferred"
          TopLeft="67.1320754716981,25.8301886792452" />
        <NodeLayout
          Size="229,44"
          Id="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Equal 1\Insert New File Properties Into Monitoring Log Detail Table"
          TopLeft="58.5660377358491,250.698113207547" />
        <NodeLayout
          Size="196,44"
          Id="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Equal 1\Update Status On Monitoring Log Table"
          TopLeft="75.622641509434,143.792452830189" />
        <EdgeLayout
          Id="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Equal 1.PrecedenceConstraints[Constraint]"
          TopLeft="175.283018867925,69.7547169811321">
          <EdgeLayout.Curve>
            <mssgle:Curve
              StartConnector="{assembly:Null}"
              EndConnector="-1.47169811320754,74.0377358490566"
              Start="0,0"
              End="-1.47169811320754,66.5377358490566">
              <mssgle:Curve.Segments>
                <mssgle:SegmentCollection
                  Capacity="5">
                  <mssgle:LineSegment
                    End="0,37.0188679245283" />
                  <mssgle:LineSegment
                    End="-1.47169811320754,37.0188679245283" />
                  <mssgle:LineSegment
                    End="-1.47169811320754,66.5377358490566" />
                </mssgle:SegmentCollection>
              </mssgle:Curve.Segments>
            </mssgle:Curve>
          </EdgeLayout.Curve>
          <EdgeLayout.Labels>
            <mssgm:EdgeLabel
              BoundingBox="-8.73584905660377,42.0188679245283,16,16"
              RelativePosition="Any" />
          </EdgeLayout.Labels>
        </EdgeLayout>
        <EdgeLayout
          Id="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Equal 1.PrecedenceConstraints[Constraint 1]"
          TopLeft="173.811320754717,187.716981132075">
          <EdgeLayout.Curve>
            <mssgle:Curve
              StartConnector="{assembly:Null}"
              EndConnector="-0.981132075471692,62.9811320754717"
              Start="0,0"
              End="-0.981132075471692,55.4811320754717">
              <mssgle:Curve.Segments>
                <mssgle:SegmentCollection
                  Capacity="5">
                  <mssgle:LineSegment
                    End="0,31.4716981132075" />
                  <mssgle:LineSegment
                    End="-0.981132075471692,31.4716981132075" />
                  <mssgle:LineSegment
                    End="-0.981132075471692,55.4811320754717" />
                </mssgle:SegmentCollection>
              </mssgle:Curve.Segments>
            </mssgle:Curve>
          </EdgeLayout.Curve>
          <EdgeLayout.Labels>
            <EdgeLabelCollection />
          </EdgeLayout.Labels>
        </EdgeLayout>
        <ContainerLayout
          HeaderHeight="43.283018867924525"
          IsExpanded="True"
          PanelSize="352,338"
          Size="352,382"
          Id="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Equal 1"
          TopLeft="57.6981132075472,173.981132075472" />
        <NodeLayout
          Size="237,44"
          Id="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Greater Than 1\Check Number Of Files Which StatusId Equal Status Id Before"
          TopLeft="41.0188679245282,27.5283018867924" />
        <NodeLayout
          Size="192,44"
          Id="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Greater Than 1\Foreach Loop FileName Collection\Check File Availability On FTP Server"
          TopLeft="24.2641509433962,21.3396226415094" />
        <NodeLayout
          Size="191,44"
          Id="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Greater Than 1\Foreach Loop FileName Collection\Insert Into History Monitoring Log"
          TopLeft="24.3396226415094,118.962264150943" />
        <NodeLayout
          Size="191,44"
          Id="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Greater Than 1\Foreach Loop FileName Collection\Update Monitoring Log Detail Table"
          TopLeft="27.7358490566038,219.943396226415" />
        <EdgeLayout
          Id="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Greater Than 1\Foreach Loop FileName Collection.PrecedenceConstraints[Constraint]"
          TopLeft="120.22641509434,65.2641509433962">
          <EdgeLayout.Curve>
            <mssgle:Curve
              StartConnector="{assembly:Null}"
              EndConnector="-0.490566037735789,53.6981132075473"
              Start="0,0"
              End="-0.490566037735789,46.1981132075473">
              <mssgle:Curve.Segments>
                <mssgle:SegmentCollection
                  Capacity="5">
                  <mssgle:LineSegment
                    End="0,26.8301886792453" />
                  <mssgle:LineSegment
                    End="-0.490566037735789,26.8301886792453" />
                  <mssgle:LineSegment
                    End="-0.490566037735789,46.1981132075473" />
                </mssgle:SegmentCollection>
              </mssgle:Curve.Segments>
            </mssgle:Curve>
          </EdgeLayout.Curve>
          <EdgeLayout.Labels>
            <mssgm:EdgeLabel
              BoundingBox="-8.24528301886789,31.8301886792453,16,16"
              RelativePosition="Any" />
          </EdgeLayout.Labels>
        </EdgeLayout>
        <EdgeLayout
          Id="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Greater Than 1\Foreach Loop FileName Collection.PrecedenceConstraints[Constraint 1]"
          TopLeft="119.735849056604,162.88679245283">
          <EdgeLayout.Curve>
            <mssgle:Curve
              StartConnector="{assembly:Null}"
              EndConnector="3.39622641509425,57.0566037735848"
              Start="0,0"
              End="3.39622641509425,49.5566037735848">
              <mssgle:Curve.Segments>
                <mssgle:SegmentCollection
                  Capacity="5">
                  <mssgle:LineSegment
                    End="0,28.5283018867924" />
                  <mssgle:LineSegment
                    End="3.39622641509425,28.5283018867924" />
                  <mssgle:LineSegment
                    End="3.39622641509425,49.5566037735848" />
                </mssgle:SegmentCollection>
              </mssgle:Curve.Segments>
            </mssgle:Curve>
          </EdgeLayout.Curve>
          <EdgeLayout.Labels>
            <EdgeLabelCollection />
          </EdgeLayout.Labels>
        </EdgeLayout>
        <ContainerLayout
          HeaderHeight="43.283018867924525"
          IsExpanded="True"
          PanelSize="241,292"
          Size="241,335"
          Id="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Greater Than 1\Foreach Loop FileName Collection"
          TopLeft="39.9245283018868,206.547169811321" />
        <NodeLayout
          Size="225,44"
          Id="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Greater Than 1\Retrieve File Names"
          TopLeft="49.8113207547169,128.88679245283" />
        <EdgeLayout
          Id="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Greater Than 1.PrecedenceConstraints[Constraint]"
          TopLeft="159.735849056604,71.4528301886793">
          <EdgeLayout.Curve>
            <mssgle:Curve
              StartConnector="{assembly:Null}"
              EndConnector="2.67924528301887,57.4339622641509"
              Start="0,0"
              End="2.67924528301887,49.9339622641509">
              <mssgle:Curve.Segments>
                <mssgle:SegmentCollection
                  Capacity="5">
                  <mssgle:LineSegment
                    End="0,28.7169811320754" />
                  <mssgle:LineSegment
                    End="2.67924528301887,28.7169811320754" />
                  <mssgle:LineSegment
                    End="2.67924528301887,49.9339622641509" />
                </mssgle:SegmentCollection>
              </mssgle:Curve.Segments>
            </mssgle:Curve>
          </EdgeLayout.Curve>
          <EdgeLayout.Labels>
            <mssgm:EdgeLabel
              BoundingBox="-6.66037735849056,33.7169811320754,16,16"
              RelativePosition="Any" />
          </EdgeLayout.Labels>
        </EdgeLayout>
        <EdgeLayout
          Id="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Greater Than 1.PrecedenceConstraints[Constraint 1]"
          TopLeft="162.415094339623,172.811320754717">
          <EdgeLayout.Curve>
            <mssgle:Curve
              StartConnector="{assembly:Null}"
              EndConnector="-1.7735849056603,33.7358490566037"
              Start="0,0"
              End="-1.7735849056603,26.2358490566037">
              <mssgle:Curve.Segments>
                <mssgle:SegmentCollection
                  Capacity="5">
                  <mssgle:LineSegment
                    End="0,16.8679245283018" />
                  <mssgle:LineSegment
                    End="-1.7735849056603,16.8679245283018" />
                  <mssgle:LineSegment
                    End="-1.7735849056603,26.2358490566037" />
                </mssgle:SegmentCollection>
              </mssgle:Curve.Segments>
            </mssgle:Curve>
          </EdgeLayout.Curve>
          <EdgeLayout.Labels>
            <EdgeLabelCollection />
          </EdgeLayout.Labels>
        </EdgeLayout>
        <ContainerLayout
          HeaderHeight="43.283018867924525"
          IsExpanded="True"
          PanelSize="325,568"
          Size="325,611"
          Id="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Process If stateId Greater Than 1"
          TopLeft="503.018867924528,174.622641509434" />
        <NodeLayout
          Size="267,44"
          Id="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Retrieve StateId Based On Monitoring Configuration Id"
          TopLeft="310.830188679245,34.2830188679245" />
        <NodeLayout
          Size="232,44"
          Id="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection\Store Current Monitoring Configuration Id"
          TopLeft="337.849056603774,855.792452830189" />
        <EdgeLayout
          Id="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection.PrecedenceConstraints[Constraint]"
          TopLeft="402.981132075472,78.2075471698113">
          <EdgeLayout.Curve>
            <mssgle:Curve
              StartConnector="{assembly:Null}"
              EndConnector="-169.169811320755,95.7735849056604"
              Start="0,0"
              End="-169.169811320755,88.2735849056604">
              <mssgle:Curve.Segments>
                <mssgle:SegmentCollection
                  Capacity="5">
                  <mssgle:LineSegment
                    End="0,47.8867924528303" />
                  <mssgle:LineSegment
                    End="-169.169811320755,47.8867924528303" />
                  <mssgle:LineSegment
                    End="-169.169811320755,88.2735849056604" />
                </mssgle:SegmentCollection>
              </mssgle:Curve.Segments>
            </mssgle:Curve>
          </EdgeLayout.Curve>
          <EdgeLayout.Labels>
            <mssgm:EdgeLabel
              BoundingBox="-92.5849056603774,52.8867924528303,16,16"
              RelativePosition="Any" />
          </EdgeLayout.Labels>
        </EdgeLayout>
        <EdgeLayout
          Id="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection.PrecedenceConstraints[Constraint 1]"
          TopLeft="486,78.2075471698113">
          <EdgeLayout.Curve>
            <mssgle:Curve
              StartConnector="{assembly:Null}"
              EndConnector="179.283018867925,96.4150943396227"
              Start="0,0"
              End="179.283018867925,88.9150943396227">
              <mssgle:Curve.Segments>
                <mssgle:SegmentCollection
                  Capacity="5">
                  <mssgle:LineSegment
                    End="0,48.1886792452831" />
                  <mssgle:LineSegment
                    End="179.283018867925,48.1886792452831" />
                  <mssgle:LineSegment
                    End="179.283018867925,88.9150943396227" />
                </mssgle:SegmentCollection>
              </mssgle:Curve.Segments>
            </mssgle:Curve>
          </EdgeLayout.Curve>
          <EdgeLayout.Labels>
            <mssgm:EdgeLabel
              BoundingBox="81.6415094339623,53.1886792452831,16,16"
              RelativePosition="Any" />
          </EdgeLayout.Labels>
        </EdgeLayout>
        <EdgeLayout
          Id="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection.PrecedenceConstraints[Constraint 2]"
          TopLeft="233.811320754717,555.528301886793">
          <EdgeLayout.Curve>
            <mssgle:Curve
              StartConnector="{assembly:Null}"
              EndConnector="178.452830188679,300.264150943396"
              Start="0,0"
              End="178.452830188679,292.764150943396">
              <mssgle:Curve.Segments>
                <mssgle:SegmentCollection
                  Capacity="5">
                  <mssgle:LineSegment
                    End="0,150.11320754717" />
                  <mssgle:LineSegment
                    End="178.452830188679,150.11320754717" />
                  <mssgle:LineSegment
                    End="178.452830188679,292.764150943396" />
                </mssgle:SegmentCollection>
              </mssgle:Curve.Segments>
            </mssgle:Curve>
          </EdgeLayout.Curve>
          <EdgeLayout.Labels>
            <EdgeLabelCollection />
          </EdgeLayout.Labels>
        </EdgeLayout>
        <EdgeLayout
          Id="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection.PrecedenceConstraints[Constraint 3]"
          TopLeft="665.283018867925,785.830188679245">
          <EdgeLayout.Curve>
            <mssgle:Curve
              StartConnector="{assembly:Null}"
              EndConnector="-170,69.9622641509434"
              Start="0,0"
              End="-170,62.4622641509434">
              <mssgle:Curve.Segments>
                <mssgle:SegmentCollection
                  Capacity="5">
                  <mssgle:LineSegment
                    End="0,34.9811320754718" />
                  <mssgle:LineSegment
                    End="-170,34.9811320754718" />
                  <mssgle:LineSegment
                    End="-170,62.4622641509434" />
                </mssgle:SegmentCollection>
              </mssgle:Curve.Segments>
            </mssgle:Curve>
          </EdgeLayout.Curve>
          <EdgeLayout.Labels>
            <EdgeLabelCollection />
          </EdgeLayout.Labels>
        </EdgeLayout>
        <ContainerLayout
          HeaderHeight="43.283018867924525"
          IsExpanded="True"
          PanelSize="874,919"
          Size="874,962"
          Id="Package\Foreach Loop File Template Id Collection\Foreach Loop Monitoring Configuration Id Collection"
          TopLeft="47.3962264150943,217.679245283019" />
        <NodeLayout
          Size="217,44"
          Id="Package\Foreach Loop File Template Id Collection\Retrieve Monitoring Configuration Id Colection"
          TopLeft="415.622641509434,118.358490566038" />
        <NodeLayout
          Size="211,44"
          Id="Package\Foreach Loop File Template Id Collection\Retrieve Monitoring Log Id"
          TopLeft="702.716981132075,47.7924528301887" />
        <NodeLayout
          Size="198,44"
          Id="Package\Foreach Loop File Template Id Collection\Truncate Staging Raw Files Table"
          TopLeft="172.377358490566,48.3584905660377" />
        <EdgeLayout
          Id="Package\Foreach Loop File Template Id Collection.PrecedenceConstraints[Constraint]"
          TopLeft="370.264150943396,70.3207547169811">
          <EdgeLayout.Curve>
            <mssgle:Curve
              StartConnector="{assembly:Null}"
              EndConnector="332.452830188679,-0.566037735849079"
              Start="0,0"
              End="324.952830188679,-0.566037735849079">
              <mssgle:Curve.Segments>
                <mssgle:SegmentCollection
                  Capacity="5">
                  <mssgle:LineSegment
                    End="166.22641509434,0" />
                  <mssgle:LineSegment
                    End="166.22641509434,-0.566037735849079" />
                  <mssgle:LineSegment
                    End="324.952830188679,-0.566037735849079" />
                </mssgle:SegmentCollection>
              </mssgle:Curve.Segments>
            </mssgle:Curve>
          </EdgeLayout.Curve>
          <EdgeLayout.Labels>
            <EdgeLabelCollection />
          </EdgeLayout.Labels>
        </EdgeLayout>
        <EdgeLayout
          Id="Package\Foreach Loop File Template Id Collection.PrecedenceConstraints[Constraint 1]"
          TopLeft="849.811320754717,91.7169811320755">
          <EdgeLayout.Curve>
            <mssgle:Curve
              StartConnector="{assembly:Null}"
              EndConnector="-325.811320754717,26.6415094339623"
              Start="0,0"
              End="-325.811320754717,19.1415094339623">
              <mssgle:Curve.Segments>
                <mssgle:SegmentCollection
                  Capacity="5">
                  <mssgle:LineSegment
                    End="0,19.9622641509434" />
                  <mssgle:LineSegment
                    End="-325.811320754717,19.9622641509434" />
                  <mssgle:LineSegment
                    End="-325.811320754717,19.1415094339623" />
                </mssgle:SegmentCollection>
              </mssgle:Curve.Segments>
            </mssgle:Curve>
          </EdgeLayout.Curve>
          <EdgeLayout.Labels>
            <EdgeLabelCollection />
          </EdgeLayout.Labels>
        </EdgeLayout>
        <EdgeLayout
          Id="Package\Foreach Loop File Template Id Collection.PrecedenceConstraints[Constraint 2]"
          TopLeft="524,162.283018867925">
          <EdgeLayout.Curve>
            <mssgle:Curve
              StartConnector="{assembly:Null}"
              EndConnector="-39.7735849056604,55.3962264150944"
              Start="0,0"
              End="-39.7735849056604,47.8962264150944">
              <mssgle:Curve.Segments>
                <mssgle:SegmentCollection
                  Capacity="5">
                  <mssgle:LineSegment
                    End="0,27.6981132075472" />
                  <mssgle:LineSegment
                    End="-39.7735849056604,27.6981132075472" />
                  <mssgle:LineSegment
                    End="-39.7735849056604,47.8962264150944" />
                </mssgle:SegmentCollection>
              </mssgle:Curve.Segments>
            </mssgle:Curve>
          </EdgeLayout.Curve>
          <EdgeLayout.Labels>
            <EdgeLabelCollection />
          </EdgeLayout.Labels>
        </EdgeLayout>
        <ContainerLayout
          HeaderHeight="43.924528301886795"
          IsExpanded="True"
          PanelSize="967,1236"
          Size="967,1280"
          Id="Package\Foreach Loop File Template Id Collection"
          TopLeft="5.5,126.933962264151" />
        <NodeLayout
          Size="199,44"
          Id="Package\Retrieve File Template Id"
          TopLeft="390.405660377358,5.5" />
        <EdgeLayout
          Id="Package.PrecedenceConstraints[Constraint]"
          TopLeft="489.915094339623,49.4245283018868">
          <EdgeLayout.Curve>
            <mssgle:Curve
              StartConnector="{assembly:Null}"
              EndConnector="-0.754716981132106,77.5094339622642"
              Start="0,0"
              End="-0.754716981132106,70.0094339622642">
              <mssgle:Curve.Segments>
                <mssgle:SegmentCollection
                  Capacity="5">
                  <mssgle:LineSegment
                    End="0,38.7547169811321" />
                  <mssgle:LineSegment
                    End="-0.754716981132106,38.7547169811321" />
                  <mssgle:LineSegment
                    End="-0.754716981132106,70.0094339622642" />
                </mssgle:SegmentCollection>
              </mssgle:Curve.Segments>
            </mssgle:Curve>
          </EdgeLayout.Curve>
          <EdgeLayout.Labels>
            <EdgeLabelCollection />
          </EdgeLayout.Labels>
        </EdgeLayout>
      </GraphLayout>
    </LayoutInfo>
  </Package>
</Objects>]]></DTS:DesignTimeProperties>
</DTS:Executable>